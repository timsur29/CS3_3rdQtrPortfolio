<!DOCTYPE html>
<html>
    <head>
        <title>View Signups (Q3 G2)</title>
    </head>
    <body>
        <h1>View Club Signups</h1><br>

        <form>
            <select name="Select Your Club: " id="filter" required>
                <option value="all">All</option>
                <option value="Alianti">Alianti</option>
                <option value="Alyabo">Alyabo</option>
                <option value="Exposure">Exposure</option>
                <option value="SARS+">SARS+</option>
                <option value="Sightlines">Sightlines</option>
            </select>
        </form>

        <table id="tab">
            <tr>
                <th>Student ID</th>
                <th>Full Name</th>
                <th>Date of Birth</th>
                <th>Student Email</th>
                <th>Mobile Phone Number</th>
                <th>Grade Level</th>
                <th>Intern/Extern Status</th>
                <th>Preferred Organization</th>
            </tr>
        </table>
    </body>

    <script>
        //get stored data
        const key = "signups";
        const existing = JSON.parse(localStorage.getItem(key) || []);

        createTable("all");

        filter = document.getElementById("filter");

        filter.addEventListener('change', createTable(filter.value));

        function createTable(tabmode) {
            const tab = document.getElementById("tab");
            for (let i=tab.rows.length; i>0; i++) {
                tab.deleteRow(i)
            }

            if (tabmode == "all") {
                let keylist = Object.keys(existing[i])
                for (let i=0; i<existing.length; i++) {
                    row = tab.insertRow(i)
                    for (let j=0; j<8; j++) {
                        cell = row.insertCell[j];
                        cell.textContent = existing[i][keylist[j].toString()]
                    }
                }
            }
        }

    </script>
</html>